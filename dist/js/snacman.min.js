let playerGamesList=JSON.parse(localStorage.getItem("playerGames"));const puzzle=getParameterByName("name"),gameSongs=playerGamesList[puzzle].puzzle,gameTitle=playerGamesList[puzzle].title,newPuzzle=playerGamesList[puzzle],songs=Object.keys(gameSongs),rows=4,cols=5;let progressBarPercentage,numToWin,blink,lives=3,numCorrect=0,progressBarValue=0,score=0,chewable=!0,ten_minutes=0,minutes=1,ten_seconds=0,seconds=0,blinking=!1;const clock=setInterval((function(){setTime(ten_minutes,minutes,ten_seconds,--seconds)}),1e3),timer=document.getElementById("timer");let winGame=!1;function addPuzzleTitle(){document.querySelector("h1").textContent=gameTitle}function getParameterByName(e){const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function findNumToWin(e){numToWin=0;for(let t in e)numToWin+=e.hasOwnProperty(t)&&e[t]?1:0;return numToWin}function drawLives(e){for(let t=0;t<e;t++){const e=`<img class="life-remaining" id="life${t}" width="50" height="50" src="img/snacman.svg" alt="snacman extra life">`;document.getElementById("gameLivesRemaining").insertAdjacentHTML("beforeend",e)}}function drawBoard(){let e="";for(let t=0;t<4;t++)for(let n=0;n<5;n++)e+=` <div id="r${t.toString()+"c"+n.toString()}" class="cell"><p>${songs.pop()}</p></div>`;document.getElementById("gameBoard").innerHTML=e}function placeSnacman(){document.getElementById("r0c0").insertAdjacentHTML("beforeend",'<svg id="snacman" x="0px" y="0px"  viewBox="0 0 30.3 37.1" style="enable-background:new 0 0 30.3 37.1;" xml:space="preserve"><g class="limb limb-left"><line class="line-1 leg" x1="13.7" y1="31.3" x2="13.7" y2="37.1"/><line class="line-2 foot" x1="8.6" y1="36.9" x2="13.9" y2="36.9"/></g><g class="limb limb-right"><line class="line-3 leg" x1="18" y1="31.4" x2="18" y2="37.1"/><line class="line-4 foot" x1="17.8" y1="36.9" x2="23.1" y2="36.9"/></g><g class="mouth"><path class="path-1 mouth-top" d="M29.7,11.3C28.6,5.2,22.5,0.5,15.2,0.5S1.8,5.2,0.6,11.3H29.7z"/><path class="path-2 mouth-bottom" d="M1.5,22.5c2.3,5.2,7.6,8.9,13.7,8.9s11.4-3.7,13.7-8.9H1.5z"/></g><g class="eye eye-left"><path class="path-3 eye-white" d="M14.2,3.8c0,1.1-0.9,2-1.9,2s-1.9-0.9-1.9-2s0.9-2,1.9-2S14.2,2.6,14.2,3.8z"/><path class="path-4 eye-pupil" d="M12.9,3.1c0,0.6-0.5,1.1-1.1,1.1s-1.1-0.5-1.1-1.2S11.2,2,11.8,2S12.9,2.5,12.9,3.1z"/></g><g class="eye eye-right"><path class="path-5 eye-white" d="M20.7,3.6c0,1.1-0.9,2-1.9,2s-1.9-0.9-1.9-2s0.9-2,1.9-2S20.7,2.5,20.7,3.6z"/><path class="path-6 eye eye-pupil" d="M20.3,4.4c0,0.6-0.5,1.2-1.1,1.2s-1.1-0.5-1.1-1.2s0.5-1.2,1.1-1.2S20.3,3.8,20.3,4.4z"/></g></svg>')}function setTime(e,t,n,r){ten_minutes=e,minutes=t,ten_seconds=n,seconds=r,(!blinking&&0===ten_minutes&&0===minutes&&0===ten_seconds||!blinking&&0===minutes&&ten_seconds<=1&&0===seconds)&&(blinking=!0,timer.style.color="red",blink=setInterval((function(){"visible"===timer.style.visibility?timer.style.visibility="hidden":timer.style.visibility="visible"}),500)),-1===seconds&&(ten_seconds?(ten_seconds--,seconds=9):minutes?(ten_seconds=5,seconds=9,minutes--):(seconds=0,timer.style.visibility="visible",gameOver(),clearInterval(clock),clearInterval(blink))),timer.textContent=`${ten_minutes.toString()}${minutes.toString()}:${ten_seconds.toString()}${seconds.toString()}`}numToWin=findNumToWin(gameSongs),progressBarPercentage=100/findNumToWin(gameSongs),drawLives(2),drawBoard(),placeSnacman(),addPuzzleTitle(),setUserCumulativeScore();let currentRow=0,currentColumn=0,currentLocation=`r${currentRow}c${currentColumn}`,currentLocationId=document.getElementById(currentLocation),snacman=document.getElementById("snacman");function moveSnacman(){currentLocation=`r${currentRow}c${currentColumn}`,currentLocationId=document.getElementById(currentLocation),currentLocationId.appendChild(snacman)}function eat(){const e=document.querySelector(".limb-left .leg"),t=document.querySelector(".limb-right .leg"),n=document.querySelector(".mouth-bottom");e.setAttribute("y1","21.5"),t.setAttribute("y1","21.5"),n.setAttribute("d","M1.5,12.5c2.3,5.2,7.6,8.9,13.7,8.9s11.4-3.7,13.7-8.9H1.5z"),setTimeout((function(){e.setAttribute("y1","31.3"),t.setAttribute("y1","31.3"),n.setAttribute("d","M1.5,22.5c2.3,5.2,7.6,8.9,13.7,8.9s11.4-3.7,13.7-8.9H1.5z")}),100)}function munchCheck(){let e=document.querySelector(`#${currentLocation} p`);gameSongs[e.textContent]&&lives?(++numCorrect,score+=100,progressBarValue+=progressBarPercentage,document.getElementById("gamePointTotal").innerHTML=score,document.getElementById("progressBar").style.width=`${progressBarValue}%`,e.textContent="",numCorrect===numToWin&&(winGame=!0,gameOver())):""===e.textContent?e.textContent="":lives>0?(snacman.classList.add("die-animation"),currentLocationId.style.backgroundColor="rgba(196, 30, 58,1)",e.textContent="",lifeCheck(--lives),chewable=!1,setTimeout((function(){chewable=!0,snacman.classList.remove("die-animation")}),1e3)):(clearInterval(clock),gameOver())}function lifeCheck(e){if(0===e)gameOver();else{let t="life"+(e-1);document.getElementById(t).style.visibility="hidden"}}function setUserCumulativeScore(){if(null===localStorage.getItem("totalUserScore")){let e="0";localStorage.setItem("totalUserScore",e)}}function gameOver(){let e=document.getElementById("resultHeading"),t=document.getElementById("resultText"),n=document.getElementById("gameScore"),r=document.getElementById("nextPuzzleBtn"),s=document.getElementById("fireworks"),o=localStorage.getItem("totalUserScore");winGame?(score+=100*(seconds+10*ten_seconds+60*minutes+3600*ten_minutes)+500*lives,e.textContent="You Win!",t.textContent="Congratulations!",s.innerHTML='<div class="pyro"><div class="before"></div><div class="after"></div></div>',newPuzzle.result="win"):(score=0,e.textContent="Game Over",t.textContent="Better luck next time!",newPuzzle.result="loss"),n.textContent=`${score}`,r.setAttribute("href",function(){const e=Object.keys(playerGamesList);return`?name=${e[Math.floor(Math.random()*(e.length-1))]}`}()),clearInterval(clock),clearInterval(blink),document.getElementById("gameOver").style.visibility="visible",document.getElementById("playView").style.opacity=.3;let a=(parseInt(o)+score).toString();localStorage.setItem("totalUserScore",a),newPuzzle.played=!0,newPuzzle.score=`${score}`,localStorage.setItem("playerGames",JSON.stringify(playerGamesList))}window.addEventListener("keydown",(function(e){if(!e.defaultPrevented){switch(e.key){case"Down":case"ArrowDown":case"s":currentRow++,currentRow>=4&&(currentRow=0),moveSnacman();break;case"Up":case"ArrowUp":case"w":currentRow--,currentRow<0&&(currentRow=3),moveSnacman();break;case"Left":case"ArrowLeft":case"a":currentColumn--,currentColumn<0&&(currentColumn=4),moveSnacman();break;case"Right":case"ArrowRight":case"d":currentColumn++,currentColumn>=5&&(currentColumn=0),moveSnacman();break;case"Enter":case" ":chewable&&(munchCheck(),eat());break;default:return}e.preventDefault()}}),!0);const beforeUnloadListener=e=>(e.preventDefault(),e.returnValue="Are you sure you want to exit?"),exitGame=document.querySelector("#exitGame");exitGame.addEventListener("click",(e=>{addEventListener("beforeunload",beforeUnloadListener)}));
//# sourceMappingURL=snacman.min.js.map
